<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Help Center | DuoSub - Subtitle Creator</title>
    <meta name="description" content="User manual and troubleshooting guide for DuoSub - Subtitle Creator extension. Learn how to translate subtitles and fix API key errors.">
    <style>
        :root {
            --primary: #1a73e8;
            --text: #202124;
            --bg: #ffffff;
            --light-bg: #f8f9fa;
            --border: #dadce0;
            --code-bg: #282c34;
            --code-text: #abb2bf;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif;
            line-height: 1.6;
            color: var(--text);
            margin: 0;
            padding: 0;
            background: var(--light-bg);
        }

        .container {
            max-width: 900px;
            margin: 0 auto;
            padding: 20px;
            background: var(--bg);
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
            min-height: 100vh;
        }

        /* Header */
        header {
            border-bottom: 1px solid var(--border);
            padding-bottom: 20px;
            margin-bottom: 40px;
            display: flex;
            align-items: center;
            gap: 15px;
        }

        header img {
            width: 32px;
            height: 32px;
        }

        header h1 {
            margin: 0;
            font-size: 24px;
            color: var(--primary);
        }

        /* Navigation */
        nav ul {
            list-style: none;
            padding: 0;
            display: flex;
            gap: 20px;
            flex-wrap: wrap;
            margin-bottom: 40px;
            background: var(--light-bg);
            padding: 15px;
            border-radius: 8px;
        }

        nav a {
            text-decoration: none;
            color: var(--text);
            font-weight: 500;
            font-size: 14px;
        }

        nav a:hover {
            color: var(--primary);
        }

        /* Content Blocks */
        section {
            margin-bottom: 50px;
            scroll-margin-top: 20px;
        }

        h2 {
            font-size: 22px;
            border-bottom: 2px solid var(--primary);
            padding-bottom: 10px;
            margin-bottom: 20px;
        }

        h3 {
            font-size: 18px;
            color: #444;
            margin-top: 25px;
        }

        p, li {
            font-size: 15px;
            color: #4a4a4a;
        }

        ul {
            padding-left: 20px;
        }

        /* Alert Box */
        .alert {
            background-color: #fff4e5;
            border-left: 5px solid #ffa000;
            padding: 15px;
            border-radius: 4px;
            margin: 20px 0;
        }

        /* Code Blocks */
        pre {
            background: var(--code-bg);
            color: var(--code-text);
            padding: 15px;
            border-radius: 6px;
            overflow-x: auto;
            font-size: 13px;
        }

        code {
            font-family: 'Consolas', 'Monaco', monospace;
        }

        .step-number {
            display: inline-block;
            background: var(--primary);
            color: white;
            width: 24px;
            height: 24px;
            text-align: center;
            border-radius: 50%;
            font-size: 14px;
            line-height: 24px;
            margin-right: 10px;
        }

        /* Footer */
        footer {
            margin-top: 50px;
            padding-top: 20px;
            border-top: 1px solid var(--border);
            text-align: center;
            font-size: 12px;
            color: #666;
        }

        footer a {
            color: var(--primary);
            text-decoration: none;
        }

        @media (max-width: 600px) {
            .container { padding: 15px; }
            nav ul { flex-direction: column; gap: 10px; }
        }
    </style>
</head>
<body>

<div class="container">
    <header>
        <!-- Replace with your icon URL if hosted, or keep generic emoji -->
        <span style="font-size: 32px;">‚ùì</span> 
        <h1>DuoSub - Subtitle Creator</h1>
    </header>

    <nav>
        <ul>
            <li><a href="#manual">User Manual</a></li>
            <li><a href="#api-guide" style="color:#d93025; font-weight:bold;">‚ö†Ô∏è Fix "ALL_KEYS_DEAD"</a></li>
            <li><a href="#troubleshooting">Troubleshooting</a></li>
            <li><a href="https://duosub.github.io/donate/index.html">Support Development</a></li>
        </ul>
    </nav>

    <!-- MANUAL SECTION -->
    <section id="manual">
        <h2>User Manual</h2>
        <p><strong>DuoSub</strong> is a professional browser extension designed to translate subtitle files into other languages while preserving original timestamps. It specializes in creating "Dual Subtitles" (Original + Translation) for language learning and content creation.</p>

        <h3>1. The Header & Settings</h3>
        <ul>
            <li><strong>üåê UI Language (Globe Icon):</strong> Changes the language of the extension's interface buttons and menus (English, Spanish, Chinese, French, German, Russian).</li>
            <li><strong>üåì Dark/Light Mode:</strong> Toggles between a light and dark theme for comfortable viewing.</li>
        </ul>

        <h3>2. File Upload Area</h3>
        <p>Click the large folder icon üìÇ area to select a subtitle file from your computer.</p>
        <ul>
            <li><strong>Supported Formats:</strong> .srt, .vtt, .ass, .ssa, .sbv, .sub, .txt</li>
            <li><strong>Note:</strong> Files must be <strong>UTF-8</strong> encoded for correct character display.</li>
        </ul>

        <h3>3. Target Language Selector</h3>
        <p>Select the language you want to translate your subtitles into. Use the search bar inside the dropdown to find one of the 100+ supported languages quickly.</p>

        <h3>4. Action Buttons</h3>
        <ul>
            <li><strong>Translate:</strong> Starts the process.</li>
            <li><strong>Pause/Resume:</strong> Temporarily stops or continues translation (useful for long files).</li>
            <li><strong>Download:</strong> Appears when done. Saves a new file named <code>OriginalName_[LANG].srt</code> containing both original and translated text.</li>
        </ul>
    </section>

    <!-- API GUIDE SECTION (CRITICAL) -->
    <section id="api-guide">
        <h2 style="border-color: #d93025; color: #d93025;">How to Fix "Error: ALL_KEYS_DEAD"</h2>
        
        <div class="alert">
            <strong>What is this error?</strong><br>
            The extension uses free, shared Google Translate keys. If too many people use them at once, the daily quota runs out, showing <code>ALL_KEYS_DEAD</code>. To fix this immediately, create your own free <strong>Personal API Key</strong> using Google Apps Script.
        </div>

        <h3>Step-by-Step Guide:</h3>

        <p><span class="step-number">1</span> Go to <a href="https://script.google.com/home/start" target="_blank">script.google.com</a> and sign in with your Google account.</p>

        <p><span class="step-number">2</span> Click the big <strong>"+ New Project"</strong> button.</p>

        <p><span class="step-number">3</span> Delete any code in the editor and paste the following code exactly:</p>

<pre><code>function doPost(e) {
  var p = JSON.parse(e.postData.contents);
  var translated = LanguageApp.translate(p.q, "", p.target);
  return ContentService.createTextOutput(JSON.stringify({
    status: "success", 
    translatedText: translated
  })).setMimeType(ContentService.MimeType.JSON);
}</code></pre>

        <p><span class="step-number">4</span> <strong>Deploy the App (Crucial Step):</strong></p>
        <ul>
            <li>Click the blue <strong>Deploy</strong> button (top right) > Select <strong>New deployment</strong>.</li>
            <li>Click the Gear Icon (‚öôÔ∏è) next to "Select type" and choose <strong>Web app</strong>.</li>
            <li><strong>Description:</strong> DuoSub Key (or anything you want).</li>
            <li><strong>Execute as:</strong> Me (your email).</li>
            <li><strong>Who has access:</strong> <span style="color:red; font-weight:bold;">Anyone</span> (Must be "Anyone" or it won't work!).</li>
            <li>Click <strong>Deploy</strong>.</li>
        </ul>

        <p><span class="step-number">5</span> <strong>Authorize:</strong> Google will ask for permission. Click "Review permissions" > Choose Account > Advanced > Go to (Project Name) (unsafe) > Allow.</p>

        <p><span class="step-number">6</span> <strong>Copy URL:</strong> Copy the "Web app URL" (it ends with <code>/exec</code>).</p>

        <p><span class="step-number">7</span> <strong>Paste in Extension:</strong> Open DuoSub, click <strong>"‚öôÔ∏è Use Personal API Key"</strong>, and paste your URL there.</p>
        
        <p><em>Done! You now have your own unlimited private translation server.</em></p>
    </section>

    <!-- TROUBLESHOOTING -->
    <section id="troubleshooting">
        <h2>Troubleshooting</h2>
        
        <h3>Strange symbols in subtitles?</h3>
        <p>Make sure your original subtitle file is saved with <strong>UTF-8 Encoding</strong>. You can do this by opening the file in Notepad (Windows) -> "Save As" -> Encoding: UTF-8.</p>

        <h3>Download button doesn't work?</h3>
        <p>Ensure the translation reached 100% and check your browser's "Downloads" permission for the extension.</p>
    </section>

    <footer>
        <p>&copy; 2025 DuoSub Development. <br>
        <a href="https://duosub.github.io/donate/index.html">Buy me a coffee ‚òï</a></p>
    </footer>
</div>

</body>
</html>
